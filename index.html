<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board</title>
    <style>
        body {
            background-color: #222;
            color: #fff;
            font-family: sans-serif;
            display: flex;
            height: 100vh;
        }

        .container {
            display: flex;
            width: 100%;
            padding: 20px;
            gap: 20px;
        }

        .sidebar {
            width: 200px;
            padding: 20px;
            background-color: #333;
            border-radius: 8px;
        }

        .sidebar h2 {
            margin-bottom: 10px;
        }

        .sidebar .areas-container {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .areas-container input {
            border: none;
            background-color: transparent;
            color: #fff;
            padding: 5px;
            margin-left: 10px;
        }

        .kanban-board {
            display: flex;
            gap: 20px;
            flex-grow: 1;
        }

        .column {
            background-color: #333;
            padding: 20px;
            border-radius: 8px;
            flex: 1;
            min-width: 250px;
        }

        .task {
            background-color: #444;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: move;
            display: flex;
            align-items: center;
            position: relative;
        }

        .task .title {
            flex-grow: 1;
            margin-left: 10px;
            user-select: none;
        }

        .task .tag {
            background-color: #555;
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 10px;
            color: #fff;
        }

        .task .edit-button,
        .task .delete-button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            color: #fff;
            padding: 5px 10px;
            margin-left: 10px;
            font-size: 14px;
            display: none;
        }

        .task:hover .edit-button,
        .task:hover .delete-button {
            display: block;
        }

        .task.active {
            background-color: #555;
        }

        .task.active .title {
            color: #fff;
        }

        .task.active .tag {
            background-color: #666;
        }

        .draggable {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
            background-color: #444;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            opacity: 0.8;
        }

        .draggable .title {
            flex-grow: 1;
            margin-left: 10px;
        }

        .draggable .tag {
            background-color: #555;
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 10px;
            color: #fff;
        }

        .draggable.active {
            background-color: #555;
        }

        .draggable.active .title {
            color: #fff;
        }

        .draggable.active .tag {
            background-color: #666;
        }

        .column.active {
            background-color: #444;
        }

        .column.active .task {
            background-color: #555;
        }

        .column.active .task.active {
            background-color: #666;
        }

        .column.active .task .tag {
            background-color: #777;
        }

        .new-task-form {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .new-task-form input {
            border: none;
            background-color: transparent;
            color: #fff;
            padding: 5px;
            margin-left: 10px;
            flex-grow: 1;
        }

        .new-task-form button {
            background-color: #555;
            color: #fff;
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>Áreas de trabalho</h2>
            <div class="areas-container">
                <input type="text" placeholder="Nova área">
            </div>
            <div class="areas-container">
                <input type="checkbox" id="pasta1">
                <label for="pasta1">Pasta 1</label>
            </div>
            <div class="areas-container">
                <input type="checkbox" id="pasta2">
                <label for="pasta2">Pasta 2</label>
            </div>
        </div>
        <div class="kanban-board">
            <div class="column" id="to-do">
                <h3>To do</h3>
                <div class="new-task-form">
                    <input type="text" id="new-task-input" placeholder="Nova tarefa">
                    <button id="add-task-button">+</button>
                </div>
            </div>
            <div class="column" id="in-progress">
                <h3>In progress</h3>
                <div class="new-task-form">
                    <input type="text" id="new-task-input-in-progress" placeholder="Nova tarefa">
                    <button id="add-task-button-in-progress">+</button>
                </div>
            </div>
            <div class="column" id="done">
                <h3>Done</h3>
                <div class="new-task-form">
                    <input type="text" id="new-task-input-done" placeholder="Nova tarefa">
                    <button id="add-task-button-done">+</button>
                </div>
            </div>
        </div>

        <div class="draggable" id="draggable-task"></div>

        <script>
            const toDoColumn = document.getElementById('to-do');
            const inProgressColumn = document.getElementById('in-progress');
            const doneColumn = document.getElementById('done');
            const draggableTask = document.getElementById('draggable-task');
            const newTaskInput = document.getElementById('new-task-input');
            const addTaskButton = document.getElementById('add-task-button');
            const newTaskInputInProgress = document.getElementById('new-task-input-in-progress');
            const addTaskButtonInProgress = document.getElementById('add-task-button-in-progress');
            const newTaskInputDone = document.getElementById('new-task-input-done');
            const addTaskButtonDone = document.getElementById('add-task-button-done');

            let draggedTask = null;
 let activeColumn = null;

            // Adiciona event listeners para arrastar e soltar
            toDoColumn.addEventListener('dragover', (event) => {
                event.preventDefault();
                activeColumn = toDoColumn;
            });

            inProgressColumn.addEventListener('dragover', (event) => {
                event.preventDefault();
                activeColumn = inProgressColumn;
            });

            doneColumn.addEventListener('dragover', (event) => {
                event.preventDefault();
                activeColumn = doneColumn;
            });

            // Event listener para iniciar o arrasto
            toDoColumn.addEventListener('dragstart', (event) => {
                if (event.target.classList.contains('task')) {
                    draggedTask = event.target;
                    draggableTask.innerHTML = draggedTask.innerHTML;
                    draggableTask.style.width = draggedTask.offsetWidth + 'px';
                    draggableTask.style.height = draggedTask.offsetHeight + 'px';
                    draggableTask.style.display = 'block';
                    draggedTask.classList.add('active');
                }
            });

            inProgressColumn.addEventListener('dragstart', (event) => {
                if (event.target.classList.contains('task')) {
                    draggedTask = event.target;
                    draggableTask.innerHTML = draggedTask.innerHTML;
                    draggableTask.style.width = draggedTask.offsetWidth + 'px';
                    draggableTask.style.height = draggedTask.offsetHeight + 'px';
                    draggableTask.style.display = 'block';
                    draggedTask.classList.add('active');
                }
            });

            doneColumn.addEventListener('dragstart', (event) => {
                if (event.target.classList.contains('task')) {
                    draggedTask = event.target;
                    draggableTask.innerHTML = draggedTask.innerHTML;
                    draggableTask.style.width = draggedTask.offsetWidth + 'px';
                    draggableTask.style.height = draggedTask.offsetHeight + 'px';
                    draggableTask.style.display = 'block';
                    draggedTask.classList.add('active');
                }
            });

            // Event listener para o arrasto
            document.addEventListener('dragover', (event) => {
                event.preventDefault();
                draggableTask.style.left = event.clientX + 'px';
                draggableTask.style.top = event.clientY + 'px';
            });

            // Event listener para soltar o arrasto
            document.addEventListener('drop', (event) => {
                event.preventDefault();
                if (activeColumn) {
                    activeColumn.appendChild(draggedTask);
                    draggedTask.classList.remove('active');
                    draggableTask.style.display = 'none';
                }
            });

            document.addEventListener('dragend', () => {
                draggedTask.classList.remove('active');
                draggableTask.style.display = 'none';
            });

            // Adicionar nova tarefa
            addTaskButton.addEventListener('click', () => {
                const taskTitle = newTaskInput.value;
                if (taskTitle) {
                    const newTask = document.createElement('div');
                    newTask.classList.add('task');
                    newTask.innerHTML = `
                        <div class="title">${taskTitle}</div>
                        <div class="tag" contenteditable="true">Tag</div>
                        <button class="edit-button">Editar</button>
                        <button class="delete-button">Excluir</button>
                    `;
                    newTask.setAttribute('draggable', 'true');

                    toDoColumn.appendChild(newTask);
                    newTaskInput.value = '';

                    // Adiciona event listeners para editar e excluir tarefas
                    newTask.addEventListener('dragstart', (event) => {
                        draggedTask = event.target;
                        draggableTask.innerHTML = draggedTask.innerHTML;
                        draggableTask.style.width = draggedTask.offsetWidth + 'px';
                        draggableTask.style.height = draggedTask.offsetHeight + 'px';
                        draggableTask.style.display = 'block';
                        draggedTask.classList.add('active');
                    });

                    newTask.querySelector('.edit-button').addEventListener('click', () => {
                        const taskTitleInput = document.createElement('input');
                        taskTitleInput.type = 'text';
                        taskTitleInput.value = newTask.querySelector('.title').textContent;
                        taskTitleInput.style.width = '100%';

                        const saveButton = document.createElement('button');
                        saveButton.textContent = 'Salvar';
                        saveButton.addEventListener('click', () => {
                            newTask.querySelector('.title').textContent = taskTitleInput.value;
                            newTask.removeChild(taskTitleInput);
                            newTask.removeChild(saveButton);
                        });

                        newTask.querySelector('.title').textContent = '';
                        newTask.appendChild(taskTitleInput);
                        newTask.appendChild(saveButton);
                    });

                    newTask.querySelector('.delete-button').addEventListener('click', () => {
                        toDoColumn.removeChild(newTask);
                    });
                }
            });

            addTaskButtonInProgress.addEventListener('click', () => {
                const taskTitle = newTaskInputInProgress.value;
                if (taskTitle) {
                    const newTask = document.createElement('div');
                    newTask.classList.add('task');
                    newTask.innerHTML = `
                        <div class="title">${taskTitle}</div>
                        <div class="tag" contenteditable="true"> Tag</div>
                        <button class="edit-button">Editar</button>
                        <button class="delete-button">Excluir</button>
                    `;
                    newTask.setAttribute('draggable', 'true');

                    inProgressColumn.appendChild(newTask);
                    newTaskInputInProgress.value = '';

                    // Adiciona event listeners para editar e excluir tarefas
                    newTask.addEventListener('dragstart', (event) => {
                        draggedTask = event.target;
                        draggableTask.innerHTML = draggedTask.innerHTML;
                        draggableTask.style.width = draggedTask.offsetWidth + 'px';
                        draggableTask.style.height = draggedTask.offsetHeight + 'px';
                        draggableTask.style.display = 'block';
                        draggedTask.classList.add('active');
                    });

                    newTask.querySelector('.edit-button').addEventListener('click', () => {
                        const taskTitleInput = document.createElement('input');
                        taskTitleInput.type = 'text';
                        taskTitleInput.value = newTask.querySelector('.title').textContent;
                        taskTitleInput.style.width = '100%';

                        const saveButton = document.createElement('button');
                        saveButton.textContent = 'Salvar';
                        saveButton.addEventListener('click', () => {
                            newTask.querySelector('.title').textContent = taskTitleInput.value;
                            newTask.removeChild(taskTitleInput);
                            newTask.removeChild(saveButton);
                        });

                        newTask.querySelector('.title').textContent = '';
                        newTask.appendChild(taskTitleInput);
                        newTask.appendChild(saveButton);
                    });

                    newTask.querySelector('.delete-button').addEventListener('click', () => {
                        inProgressColumn.removeChild(newTask);
                    });
                }
            });

            addTaskButtonDone.addEventListener('click', () => {
                const taskTitle = newTaskInputDone.value;
                if (taskTitle) {
                    const newTask = document.createElement('div');
                    newTask.classList.add('task');
                    newTask.innerHTML = `
                        <div class="title">${taskTitle}</div>
                        <div class="tag" contenteditable="true">Tag</div>
                        <button class="edit-button">Editar</button>
                        <button class="delete-button">Excluir</button>
                    `;
                    newTask.setAttribute('draggable', 'true');

                    doneColumn.appendChild(newTask);
                    newTaskInputDone.value = '';

                    // Adiciona event listeners para editar e excluir tarefas
                    newTask.addEventListener('dragstart', (event) => {
                        draggedTask = event.target;
                        draggableTask.innerHTML = draggedTask.innerHTML;
                        draggableTask.style.width = draggedTask.offsetWidth + 'px';
                        draggableTask.style.height = draggedTask.offsetHeight + 'px';
                        draggableTask .style.display = 'block';
                        draggedTask.classList.add('active');
                    });

                    newTask.querySelector('.edit-button').addEventListener('click', () => {
                        const taskTitleInput = document.createElement('input');
                        taskTitleInput.type = 'text';
                        taskTitleInput.value = newTask.querySelector('.title').textContent;
                        taskTitleInput.style.width = '100%';

                        const saveButton = document.createElement('button');
                        saveButton.textContent = 'Salvar';
                        saveButton.addEventListener('click', () => {
                            newTask.querySelector('.title').textContent = taskTitleInput.value;
                            newTask.removeChild(taskTitleInput);
                            newTask.removeChild(saveButton);
                        });

                        newTask.querySelector('.title').textContent = '';
                        newTask.appendChild(taskTitleInput);
                        newTask.appendChild(saveButton);
                    });

                    newTask.querySelector('.delete-button').addEventListener('click', () => {
                        doneColumn.removeChild(newTask);
                    });
                }
            });
        </script>
    </body>
</html>